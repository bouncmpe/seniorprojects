<div id="inline-gallery-container" class="inline-gallery-container">
    <div class="d-flex justify-content-center align-items-center h-100">
        <div class="spinner-border" role="status" style="color: #004281;">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>
</div>

<script>
    {{ $section := .section }}

    const dynamicCarouselEls = [
        {{ range .images }}
            {{ $image := $section.Resources.Get . }}
            {{ with $image }}
            {
                "src": "{{ . }}",
                "sources": [
                    {
                        "type": "image/webp",
                        "srcset": {{ partial "srcset.html" (dict "image" $image "type" " webp")}},
                        "sizes": "(min-width: 1024px) 60vw, 100vw"
                    },
                    {
                        "type": "image/jpeg",
                        "srcset": {{ partial "srcset.html" (dict "image" $image "type" " jpg")}},
                        "sizes": "(min-width: 1024px) 60vw, 100vw"
                    }
                ]
            },
            {{ end }}
        {{ end }}
    ]

    const lgContainer = document.getElementById('inline-gallery-container');
    window.addEventListener("load", () => {
        if (window.lightGallery) {
            const inlineGallery = window.lightGallery(lgContainer, {
                container: lgContainer,
                closable: false,
                showMaximizeIcon: true,
                dynamic: true,
                dynamicEl: dynamicCarouselEls,
                plugins: [window.lgVideo, window.lgZoom],
                preload: 0
            })
            inlineGallery.openGallery();  
        }
    });
</script>