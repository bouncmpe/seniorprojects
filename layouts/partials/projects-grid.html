{{- /* Paginate */ -}}
{{- if .pages_list -}}
    {{ $sorted := sort .pages_list "Params.rank" }}
    {{- with .Site.Params.section.paginate | default .Site.Params.paginate -}}
        {{- $sorted = $.Paginate $sorted . -}}
    {{- end -}}
    <div class="row gy-lg-3 gx-lg-5">
        {{ range $sorted }}
            {{ if and (isset .Params "rank") (le (int .Params.rank) 3) }}
                {{ partial "project-card.html" (dict "page" .) }}
            {{ end }}
        {{ end }}
        {{ range $sorted }}
            {{ if not (isset .Params "rank") }}
                {{ if .Params.poster }}
                    {{ partial "project-card.html" (dict "page" .) }}
                {{ end }}
            {{ end }}
        {{ end }}
        {{ range $sorted }}
            {{ if not (isset .Params "rank") }}
                {{ if not .Params.poster }}
                    {{ partial "project-card.html" (dict "page" .) }}
                {{ end }}
            {{ end }}
        {{ end }}
    </div>
    {{- partial "paginator.html" . -}}
{{- end -}}